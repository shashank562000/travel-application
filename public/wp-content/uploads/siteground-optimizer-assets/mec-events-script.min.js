var datepicker_format='yy-mm-dd';jQuery(document).ready(function(a){a('.mec_upload_image_button').click(function(c){c.preventDefault();var b;if(b){b.open();return}b=wp.media(),b.on('select',function(){var c=b.state().get('selection').first();a('#mec_thumbnail_img').html('<img src="'+c.attributes.url+'" />'),a('#mec_thumbnail').val(c.attributes.url),a('.mec_remove_image_button').toggleClass('mec-util-hidden'),b.close()}),b.open()}),a('.mec_remove_image_button').click(function(b){b.preventDefault(),a('#mec_thumbnail_img').html(''),a('#mec_thumbnail').val(''),a('.mec_remove_image_button').toggleClass('mec-util-hidden')}),a('.mec_location_upload_image_button').click(function(c){c.preventDefault();var b;if(b){b.open();return}b=wp.media(),b.on('select',function(){var c=b.state().get('selection').first();a('#mec_location_thumbnail_img').html('<img src="'+c.attributes.url+'" />'),a('#mec_location_thumbnail').val(c.attributes.url),a('.mec_location_remove_image_button').toggleClass('mec-util-hidden'),b.close()}),b.open()}),a('.mec_location_remove_image_button').click(function(b){b.preventDefault(),a('#mec_location_thumbnail_img').html(''),a('#mec_location_thumbnail').val(''),a('.mec_location_remove_image_button').toggleClass('mec-util-hidden')}),a('.mec_organizer_upload_image_button').click(function(c){c.preventDefault();var b;if(b){b.open();return}b=wp.media(),b.on('select',function(){var c=b.state().get('selection').first();a('#mec_organizer_thumbnail_img').html('<img src="'+c.attributes.url+'" />'),a('#mec_organizer_thumbnail').val(c.attributes.url),a('.mec_organizer_remove_image_button').toggleClass('mec-util-hidden'),b.close()}),b.open()}),a('.mec_organizer_remove_image_button').click(function(b){b.preventDefault(),a('#mec_organizer_thumbnail_img').html(''),a('#mec_organizer_thumbnail').val(''),a('.mec_organizer_remove_image_button').toggleClass('mec-util-hidden')}),a('#mec_fes_remove_image_button').click(function(b){b.preventDefault(),a('#mec_fes_thumbnail_img').html(''),a('#mec_fes_thumbnail').val(''),a('#mec_featured_image_file').val(''),a('#mec_fes_remove_image_button').addClass('mec-util-hidden')}),a('#mec_fes_location_remove_image_button').click(function(b){b.preventDefault(),a('#mec_fes_location_thumbnail_img').html(''),a('#mec_fes_location_thumbnail').val(''),a('#mec_fes_location_thumbnail_file').val(''),a('#mec_fes_location_remove_image_button').addClass('mec-util-hidden')}),a('#mec_fes_organizer_remove_image_button').click(function(b){b.preventDefault(),a('#mec_fes_organizer_thumbnail_img').html(''),a('#mec_fes_organizer_thumbnail').val(''),a('#mec_fes_organizer_thumbnail_file').val(''),a('#mec_fes_organizer_remove_image_button').addClass('mec-util-hidden')});var b;typeof mec_admin_localize!='undefined'?(b=mec_admin_localize.datepicker_format.split('&'),b[0]!==void 0&&b.length==2&&(datepicker_format=b[0])):typeof mecdata!='undefined'&&(b=mecdata.datepicker_format.split('&'),b[0]!==void 0&&b.length==2&&(datepicker_format=b[0])),a('[id^="mec-book-form-btn-step"]').on('click',function(){setTimeout(function(){a.fn.datepicker&&'date'!==a('.mec-date-picker').prop('type')&&a('.mec-date-picker').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'})},1e3)}),a.fn.datepicker&&(a('.mec-date-picker').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'}),a('#mec_start_date').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'}),a('#mec_end_date').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'}),a('#mec_date_repeat_end_at_date').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'}),a('.mec_date_picker_dynamic_format').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'}),a('.mec_date_picker').datepicker({changeYear:!0,changeMonth:!0,dateFormat:'yy-mm-dd',gotoCurrent:!0,yearRange:'c-3:c+5'}),a('.mec_date_picker_dynamic_format_start').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-1:c+5',onSelect:function(c){var d=new Date(c),e=new Date(d.getTime()),b=a(this).next();b.datepicker("option","minDate",e),b.datepicker("option","maxDate",'+5y')}}),a('.mec_date_picker_dynamic_format_end').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-1:c+5'})),a('#mec_location_id').on('change',function(){mec_location_toggle()}),a('#mec_organizer_id').on('change',function(){var c,b;mec_organizer_toggle(),c=parseInt(a(this).val()),b=a(this).parent().parent().find('#mec-additional-organizer-wrap'),c!=1?b.show():b.hide()}),mec_location_toggle(),mec_organizer_toggle(),a('#mec_repeat').on('change',function(){mec_repeat_toggle()}),mec_repeat_toggle(),a('#mec_repeat_type').on('change',function(){mec_repeat_type_toggle()}),mec_repeat_type_toggle(),a('#mec_bookings_limit_unlimited').on('change',function(){mec_bookings_unlimited_toggle()}),a('#mec_add_in_days').on('click',function(){var j=a(this).data('allday'),i=a('#mec_exceptions_in_days_start_date').val(),h,d,e,f,b,c,g,k,n,m,l,o;if(i==='')return!1;if(h=a('#mec_exceptions_in_days_end_date').val(),h==='')return!1;if(d=a('#mec_exceptions_in_days_start_hour').val(),d.length===1&&(d='0'+d),e=a('#mec_exceptions_in_days_start_minutes').val(),e.length===1&&(e='0'+e),f=a('#mec_exceptions_in_days_start_ampm').val(),typeof f=='undefined'&&(f=''),b=a('#mec_exceptions_in_days_end_hour').val(),b.length===1&&(b='0'+b),c=a('#mec_exceptions_in_days_end_minutes').val(),c.length===1&&(c='0'+c),g=a('#mec_exceptions_in_days_end_ampm').val(),typeof g=='undefined'&&(g=''),k=i+':'+h+':'+d+'-'+e+'-'+f+':'+b+'-'+c+'-'+g,n=i+' <span class="mec-time-picker-label '+(j?'mec-util-hidden':'')+'">'+d+':'+e+' '+f+'</span> - '+h+' <span class="mec-time-picker-label '+(j?'mec-util-hidden':'')+'">'+b+':'+c+' '+g+'</span>',a('#mec_in_days input[value="'+k+'"]').length>0)return!1;m=a('#mec_new_in_days_key'),l=m.val(),o=a('#mec_new_in_days_raw').html().replace(/:i:/g,l).replace(/:val:/g,k).replace(/:label:/g,n),a('#mec_in_days').append(o),m.val(parseInt(l)+1)}),a('#mec_add_not_in_days').on('click',function(){var b=a('#mec_exceptions_not_in_days_date').val(),c,d;if(b==='')return!1;c=a('#mec_new_not_in_days_key').val(),d=a('#mec_new_not_in_days_raw').html().replace(/:i:/g,c).replace(/:val:/g,b),a('#mec_not_in_days').append(d),a('#mec_new_not_in_days_key').val(parseInt(c)+1)}),a('#mec_add_ticket_button').on('click',function(){var b=a('#mec_new_ticket_key').val(),c=a('#mec_new_ticket_raw').html().replace(/:i:/g,b);a('#mec_tickets').append(c),a('#mec_new_ticket_key').val(parseInt(b)+1),a('.mec_add_price_date_button').off('click').on('click',function(){mec_handle_add_price_date_button(this)}),a.each(a(".mec-select2"),function(c,b){if(a(b).attr('name').search(":i:")>0)return;typeof a(b).data('select2-id')=='undefined'&&a(b).select2()})}),a('.mec_add_price_date_button').off('click').on('click',function(){mec_handle_add_price_date_button(this)}),mec_hourly_schedule_add_day_listener(),a('#mec_add_fee_button').on('click',function(){var b=a('#mec_new_fee_key').val(),c=a('#mec_new_fee_raw').html().replace(/:i:/g,b);a('#mec_fees_list').append(c),a('#mec_new_fee_key').val(parseInt(b)+1)}),a('#mec_add_ticket_variation_button').on('click',function(){var b=a('#mec_new_ticket_variation_key').val(),c=a('#mec_new_ticket_variation_raw').html().replace(/:i:/g,b);a('#mec_ticket_variations_list').append(c),a('#mec_new_ticket_variation_key').val(parseInt(b)+1)}),a('.mec-form-row.mec-available-color-row span').on('click',function(){a('.mec-form-row.mec-available-color-row span').removeClass('color-selected'),a(this).addClass('color-selected')}),a('#mec_reg_form_field_types button').on('click',function(){var b=a(this).data('type'),c,d;if(b=='mec_email')if(a('#mec_reg_form_fields').find('input[value="mec_email"][type="hidden"]').length)return!1;if(b=='name')if(a('#mec_reg_form_fields').find('input[value="name"][type="hidden"]').length)return!1;c=a('#mec_new_reg_field_key').val(),d=a('#mec_reg_field_'+b).html().replace(/:i:/g,c),a('#mec_reg_form_fields').append(d),a('#mec_new_reg_field_key').val(parseInt(c)+1),mec_reg_fields_option_listeners()}),mec_reg_fields_option_listeners(),a('#mec-advanced-wraper ul > ul > li').click(function(){a(this).attr('class')==''?a(this).attr('class','mec-active'):a(this).attr('class',''),a('#mec_date_repeat_advanced').val(a('#mec-advanced-wraper div:first-child > ul').find('.mec-active').find('span').text().slice(0,-1))}),a('#mec_event_form_field_types button').on('click',function(){var c=a(this).data('type'),b=a('#mec_new_event_field_key').val(),d=a('#mec_event_field_'+c).html().replace(/:i:/g,b);a('#mec_event_form_fields').append(d),a('#mec_new_event_field_key').val(parseInt(b)+1),mec_event_fields_option_listeners()}),mec_event_fields_option_listeners(),a('#mec_bfixed_form_field_types button').on('click',function(){var c=a(this).data('type'),b=a('#mec_new_bfixed_field_key').val(),d=a('#mec_bfixed_field_'+c).html().replace(/:i:/g,b);a('#mec_bfixed_form_fields').append(d),a('#mec_new_bfixed_field_key').val(parseInt(b)+1),mec_bfixed_fields_option_listeners()}),mec_bfixed_fields_option_listeners(),mec_additional_organizers_listeners()});function mec_location_toggle(){jQuery('#mec_location_id').val()!='0'?jQuery('#mec_location_new_container').hide():jQuery('#mec_location_new_container').show()}function mec_organizer_toggle(){jQuery('#mec_organizer_id').val()!='0'?jQuery('#mec_organizer_new_container').hide():jQuery('#mec_organizer_new_container').show()}function mec_repeat_toggle(){jQuery('#mec_repeat').is(':checked')?jQuery('.mec-form-repeating-event-row').show():jQuery('.mec-form-repeating-event-row').hide()}function mec_repeat_type_toggle(){var a=jQuery('#mec_repeat_type').val();a=='certain_weekdays'?(jQuery('#mec_repeat_interval_container').hide(),jQuery('#mec_repeat_certain_weekdays_container').show(),jQuery('#mec_exceptions_in_days_container').hide(),jQuery('#mec_end_wrapper').show(),jQuery('#mec-advanced-wraper').hide()):a=='custom_days'?(jQuery('#mec_repeat_interval_container').hide(),jQuery('#mec_repeat_certain_weekdays_container').hide(),jQuery('#mec_exceptions_in_days_container').show(),jQuery('#mec_end_wrapper').hide(),jQuery('#mec-advanced-wraper').hide()):a=='advanced'?(jQuery('#mec_repeat_interval_container').hide(),jQuery('#mec_repeat_certain_weekdays_container').hide(),jQuery('#mec_exceptions_in_days_container').hide(),jQuery('#mec_end_wrapper').show(),jQuery('#mec-advanced-wraper').show()):a!='daily'&&a!='weekly'&&a!='monthly'?(jQuery('#mec_repeat_interval_container').hide(),jQuery('#mec_repeat_certain_weekdays_container').hide(),jQuery('#mec_exceptions_in_days_container').hide(),jQuery('#mec_end_wrapper').show(),jQuery('#mec-advanced-wraper').hide()):(jQuery('#mec_repeat_interval_container').show(),jQuery('#mec_repeat_certain_weekdays_container').hide(),jQuery('#mec_exceptions_in_days_container').hide(),jQuery('#mec_end_wrapper').show(),jQuery('#mec-advanced-wraper').hide())}function mec_in_days_remove(a){jQuery('#mec_in_days_row'+a).remove()}function mec_not_in_days_remove(a){jQuery('#mec_not_in_days_row'+a).remove()}function mec_bookings_unlimited_toggle(){jQuery('#mec_bookings_limit').toggleClass('mec-util-hidden')}function mec_hourly_schedule_add_day_listener(){jQuery('.mec-add-hourly-schedule-day-button').each(function(){jQuery(this).off('click').on('click',function(){var b=jQuery(this).data('key'),c=jQuery(this).data('raw'),d=jQuery(this).data('append'),a=jQuery(b).val(),e=jQuery(c).html().replace(/:d:/g,a).replace(/:dd:/g,parseInt(a)+1);jQuery(d).append(e),jQuery(b).val(parseInt(a)+1),mec_hourly_schedule_listeners()}),mec_hourly_schedule_listeners()})}function mec_hourly_schedule_listeners(){jQuery('.mec-add-hourly-schedule-button').off('click').on('click',function(){var b=jQuery(this).data('prefix'),a=jQuery(this).data('day'),e=jQuery('#'+b+'mec_new_hourly_schedule_key'+a),d=e.val(),c=jQuery('#'+b+'mec_new_hourly_schedule_raw'+a).html().replace(/:i:/g,d).replace(/:d:/g,a).replace(),g=b+"-hourly_schedules-"+a+"-schedules-:i:-description",f=b+"-hourly_schedules-"+a+"-schedules-"+d+"-description";c=c.replace(g,f),c=c.replace(':k:',d),jQuery('#'+b+'mec_hourly_schedules'+a).append(c),e.val(parseInt(d)+1),wp.editor.initialize("mec"+f,{tinymce:{wpautop:!0,plugins:'charmap colorpicker compat3x directionality fullscreen hr image lists media paste tabfocus textcolor wordpress wpautoresize wpdialogs wpeditimage wpemoji wpgallery wplink wptextpattern wpview',toolbar1:'bold italic underline strikethrough | bullist numlist | blockquote hr wp_more | alignleft aligncenter alignright | link unlink | fullscreen | wp_adv',toolbar2:'formatselect alignjustify forecolor | pastetext removeformat charmap | outdent indent | undo redo | wp_help'},quicktags:!0,mediaButtons:!1})})}function mec_hourly_schedule_remove(a,b,c){jQuery("#"+c+"mec_hourly_schedule_row"+a+'_'+b).remove()}function mec_hourly_schedule_day_remove(a,b){jQuery("#"+b+"mec_meta_box_hourly_schedule_day_"+a).remove()}function mec_ticket_remove(a){jQuery("#mec_ticket_row"+a).remove()}function mec_set_event_color(a){try{jQuery("#mec_event_color").wpColorPicker('color','#'+a)}catch(b){jQuery("#mec_event_color").val(a)}}function mec_remove_fee(a){jQuery("#mec_fee_row"+a).remove()}function mec_remove_ticket_variation(a,b){jQuery("#mec_"+b+"_row"+a).remove()}function add_variation_per_ticket(a){var b=jQuery('#mec_new_variation_per_ticket_key'),c=b.val(),d=jQuery('#mec_new_variation_per_ticket_raw'+a).html().replace(/:v:/g,c);jQuery('#mec_ticket_variations_list'+a).append(d),b.val(parseInt(c)+1)}function mec_reg_fields_option_listeners(){jQuery('button.mec-reg-field-add-option').off('click').on('click',function(){var a=jQuery(this).data('field-id'),b=jQuery('#mec_new_reg_field_option_key_'+a).val(),c=jQuery('#mec_reg_field_option').html().replace(/:i:/g,b).replace(/:fi:/g,a);jQuery('#mec_reg_fields_'+a+'_options_container').append(c),jQuery('#mec_new_reg_field_option_key_'+a).val(parseInt(b)+1)}),typeof jQuery.fn.sortable!='undefined'&&(jQuery("#mec_reg_form_fields").sortable({handle:'.mec_reg_field_sort'}),jQuery(".mec_reg_fields_options_container").sortable({handle:'.mec_reg_field_option_sort'}))}function mec_reg_fields_option_remove(a,b){jQuery("#mec_reg_fields_option_"+a+"_"+b).remove()}function mec_reg_fields_remove(a){jQuery("#mec_reg_fields_"+a).remove()}function mec_handle_add_price_date_button(c){var a=jQuery(c).data('key'),b=jQuery('#mec_new_ticket_price_key_'+a).val(),d=jQuery('#mec_new_ticket_price_raw_'+a).html().replace(/:i:/g,a).replace(/:j:/g,b);jQuery('#mec-ticket-price-dates-'+a).append(d),jQuery('#mec_new_ticket_price_key_'+a).val(parseInt(b)+1),jQuery('#mec-ticket-price-dates-'+a+' .new_added').datepicker({changeYear:!0,changeMonth:!0,dateFormat:datepicker_format,gotoCurrent:!0,yearRange:'c-3:c+5'})}function mec_ticket_price_remove(a,b){jQuery("#mec_ticket_price_raw_"+a+"_"+b).remove()}function mec_event_fields_option_listeners(){jQuery('button.mec-event-field-add-option').off('click').on('click',function(){var a=jQuery(this).data('field-id'),b=jQuery('#mec_new_event_field_option_key_'+a).val(),c=jQuery('#mec_event_field_option').html().replace(/:i:/g,b).replace(/:fi:/g,a);jQuery('#mec_event_fields_'+a+'_options_container').append(c),jQuery('#mec_new_event_field_option_key_'+a).val(parseInt(b)+1)}),typeof jQuery.fn.sortable!='undefined'&&(jQuery("#mec_event_form_fields").sortable({handle:'.mec_event_field_sort'}),jQuery(".mec_event_fields_options_container").sortable({handle:'.mec_event_field_option_sort'}))}function mec_event_fields_option_remove(a,b){jQuery("#mec_event_fields_option_"+a+"_"+b).remove()}function mec_event_fields_remove(a){jQuery("#mec_event_fields_"+a).remove()}function mec_bfixed_fields_option_listeners(){jQuery('button.mec-bfixed-field-add-option').off('click').on('click',function(){var a=jQuery(this).data('field-id'),b=jQuery('#mec_new_bfixed_field_option_key_'+a).val(),c=jQuery('#mec_bfixed_field_option').html().replace(/:i:/g,b).replace(/:fi:/g,a);jQuery('#mec_bfixed_fields_'+a+'_options_container').append(c),jQuery('#mec_new_bfixed_field_option_key_'+a).val(parseInt(b)+1)}),typeof jQuery.fn.sortable!='undefined'&&(jQuery("#mec_bfixed_form_fields").sortable({handle:'.mec_bfixed_field_sort'}),jQuery(".mec_bfixed_fields_options_container").sortable({handle:'.mec_bfixed_field_option_sort'}))}function mec_bfixed_fields_option_remove(a,b){jQuery("#mec_bfixed_fields_option_"+a+"_"+b).remove()}function mec_bfixed_fields_remove(a){jQuery("#mec_bfixed_fields_"+a).remove()}function mec_additional_organizers_listeners(){jQuery('#mec_additional_organizers_add').off('click').on('click',function(){var a=jQuery('.mec-additional-organizers select').val(),b=jQuery('.mec-additional-organizers select option:selected').text(),c=jQuery(this).data('sort-label'),d=jQuery(this).data('remove-label');jQuery('.mec-additional-organizers-list').append('<li><span class="mec-additional-organizer-sort">'+c+'</span> <span onclick="mec_additional_organizers_remove(this);" class="mec-additional-organizer-remove">'+d+'</span><input type="hidden" name="mec[additional_organizer_ids][]" value="'+a+'"><span class="mec_orgz_item_name">'+b+'</span></li>'),mec_additional_organizers_listeners()}),typeof jQuery.fn.sortable!='undefined'&&jQuery(".mec-additional-organizers-list").sortable({handle:'.mec-additional-organizer-sort'})}function mec_additional_organizers_remove(a){jQuery(a).parent().remove()}